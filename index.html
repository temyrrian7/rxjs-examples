<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <title>RxJS Traffic Puzzle</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
  <!-- UMD RxJS –º–æ–∂–Ω–∞ –ª–∏—à–∏—Ç–∏, –∞–ª–µ –¥–ª—è –º–æ–¥—É–ª—ñ–≤ –≤—ñ–Ω –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω.
       –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É—î—à—Å—è ESM-—ñ–º–ø–æ—Ä—Ç–∞–º–∏ –≤ rx-levels.js ‚Äî —Ü–µ–π —Ç–µ–≥ –º–æ–∂–Ω–∞ –≤–∏–¥–∞–ª–∏—Ç–∏. -->
  <script src="https://unpkg.com/rxjs@7/dist/bundles/rxjs.umd.min.js"></script>
</head>
<body>
  <main class="container">
    <h1>üö¶ RxJS Traffic Puzzle</h1>
    <p id="level-title">–†—ñ–≤–µ–Ω—å 1: –ü—Ä–æ—Å—Ç–∏–π —Å–≤—ñ—Ç–ª–æ—Ñ–æ—Ä</p>

    <!-- –°–≤—ñ—Ç–ª–æ—Ñ–æ—Ä –¥–ª—è Level 1 -->
    <div id="traffic-light" class="traffic-light">
      <div class="light red"></div>
      <div class="light yellow"></div>
      <div class="light green"></div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –ø—ñ—à–æ—Ö–æ–¥–∞ –¥–ª—è Level 2 -->
    <button id="pedestrian-btn" style="display:none;">üö∂‚Äç‚ôÇÔ∏è –ü–µ—Ä–µ—Ö—ñ–¥</button>

    <!-- –î—Ä—É–≥–∏–π —Å–≤—ñ—Ç–ª–æ—Ñ–æ—Ä –¥–ª—è Level 3 -->
    <div id="cross-traffic" class="traffic-light" style="display:none;">
      <div class="light red"></div>
      <div class="light yellow"></div>
      <div class="light green"></div>
    </div>

    <!-- üîé –û–ü–ò–° –†–Ü–í–ù–Ü–í -->
    <section id="level-desc" class="panel">
      <!-- Level 1 -->
      <article class="desc" data-level="1">
        <h2>üü¢ –†—ñ–≤–µ–Ω—å 1 ‚Äî ¬´–ü—Ä–æ—Å—Ç–∏–π —Å–≤—ñ—Ç–ª–æ—Ñ–æ—Ä¬ª</h2>
        <p><strong>–ú–µ—Ç–∞:</strong> –ø–æ–±—É–¥—É–≤–∞—Ç–∏ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π —Ü–∏–∫–ª —Å—Ç–∞–Ω—ñ–≤ <code>—á–µ—Ä–≤–æ–Ω–∏–π ‚Üí –∂–æ–≤—Ç–∏–π ‚Üí –∑–µ–ª–µ–Ω–∏–π ‚Üí —á–µ—Ä–≤–æ–Ω–∏–π</code> –∑ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–º —ñ–Ω—Ç–µ—Ä–≤–∞–ª–æ–º.</p>
        <p><strong>–Ü–¥–µ—è RxJS:</strong> —á–∞—Å –∫–µ—Ä—É—î —Å—Ç–∞–Ω–∞–º–∏ (<code>interval</code>/<code>timer</code>), –∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è ‚Äî —Ü–µ <code>map</code>/<code>scan</code>.</p>
        <ul>
          <li><strong>–û–ø–µ—Ä–∞—Ç–æ—Ä–∏, —â–æ –∑–Ω–∞–¥–æ–±–ª—è—Ç—å—Å—è:</strong> <code>interval</code>, <code>map</code>, (–∑–∞ –±–∞–∂–∞–Ω–Ω—è–º) <code>startWith</code>.</li>
          <li><strong>–ö—Ä–∏—Ç–µ—Ä—ñ—ó —É—Å–ø—ñ—Ö—É:</strong> –∫–æ–ª—å–æ—Ä–∏ –∑–º—ñ–Ω—é—é—Ç—å—Å—è —Ü–∏–∫–ª—ñ—á–Ω–æ, –±–µ–∑ –ø—Ä–æ–ø—É—Å–∫—ñ–≤ —ñ –Ω–∞–∫–ª–∞–¥–µ–Ω—å.</li>
          <li><strong>–¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏:</strong> –∫—ñ–ª—å–∫–∞ –ø—ñ–¥–ø–∏—Å–æ–∫ –æ–¥–Ω–æ—á–∞—Å–Ω–æ (–Ω–µ –∑–∞–±—É–≤–∞–π —Ä–æ–±–∏—Ç–∏ <code>unsubscribe</code> –ø—Ä–∏ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—ñ —Ä—ñ–≤–Ω—ñ–≤).</li>
          <li><strong>–ü—ñ–¥–∫–∞–∑–∫–∞:</strong> —ñ–Ω–¥–µ–∫—Å <code>i % 3</code> –ª–µ–≥–∫–æ –º–∞–ø–∏—Ç—å—Å—è –Ω–∞ —Ç—Ä–∏ —Å—Ç–∞–Ω–∏.</li>
        </ul>
      </article>

      <!-- Level 2 -->
      <article class="desc" data-level="2" style="display:none;">
        <h2>üü° –†—ñ–≤–µ–Ω—å 2 ‚Äî ¬´–ö–Ω–æ–ø–∫–∞ –ø—ñ—à–æ—Ö–æ–¥–∞¬ª</h2>
        <p><strong>–ú–µ—Ç–∞:</strong> –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –∫–Ω–æ–ø–∫–∏ ¬´–ü—ñ—à–æ—Ö—ñ–¥–Ω–∏–π –ø–µ—Ä–µ—Ö—ñ–¥¬ª —Å–≤—ñ—Ç–ª–æ—Ñ–æ—Ä –º–∞—î —è–∫–Ω–∞–π—à–≤–∏–¥—à–µ —Å—Ç–∞—Ç–∏ <em>—á–µ—Ä–≤–æ–Ω–∏–º</em> —ñ –ø–æ—Ç—Ä–∏–º–∞—Ç–∏ –π–æ–≥–æ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, <strong>2 —Å–µ–∫—É–Ω–¥–∏</strong>, –ø—ñ—Å–ª—è —á–æ–≥–æ —Ü–∏–∫–ª –ø—Ä–æ–¥–æ–≤–∂—É—î—Ç—å—Å—è.</p>
        <p><strong>–Ü–¥–µ—è RxJS:</strong> –æ–±‚Äô—î–¥–Ω–∞—Ç–∏ –ø–æ—Ç—ñ–∫ —Ü–∏–∫–ª—É –∑—ñ —Å—Ç—Ä—ñ–º–æ–º –∫–ª—ñ–∫—ñ–≤ –∫–Ω–æ–ø–∫–∏. –†–µ–∂–∏–º ¬´pedestrian¬ª —Ç–∏–º—á–∞—Å–æ–≤–æ –ø–µ—Ä–µ–∫—Ä–∏–≤–∞—î –±–∞–∑–æ–≤–∏–π —Ü–∏–∫–ª.</p>
        <ul>
          <li><strong>–û–ø–µ—Ä–∞—Ç–æ—Ä–∏:</strong> <code>fromEvent</code>, <code>merge</code> –∞–±–æ <code>switchMap</code> –∑ <code>timer</code>/<code>concat</code>, <code>withLatestFrom</code>.</li>
          <li><strong>–ö—Ä–∏—Ç–µ—Ä—ñ—ó —É—Å–ø—ñ—Ö—É:</strong> –ø—Ä–∏ –∫–ª—ñ–∫—É –º–∏—Ç—Ç—î–≤–æ —á–µ—Ä–≤–æ–Ω–∏–π, —Ç—Ä–∏–º–∞—î—Ç—å—Å—è N –º—Å, –¥–∞–ª—ñ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª—É.</li>
          <li><strong>–¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏:</strong> ¬´–∑–ª–∏–ø–∞–Ω–Ω—è¬ª –∫–ª—ñ–∫—ñ–≤ (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π <code>switchMap</code>, —â–æ–± –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Ä–µ–∂–∏–º –∑–∞–º—ñ—â—É–≤–∞–≤—Å—è –Ω–æ–≤–∏–º), –∑–∞–±—É—Ç—ñ –≤—ñ–¥–ø–∏—Å–∫–∏.</li>
          <li><strong>–ü—ñ–¥–∫–∞–∑–∫–∞:</strong> –∑–∞–≤–µ–¥–∏ –æ–∫—Ä–µ–º–∏–π –ø–æ—Ç—ñ–∫ —Ä–µ–∂–∏–º—ñ–≤ (<code>normal</code>/<code>ped</code>) —ñ –∫–æ–º–±—ñ–Ω—É–π –π–æ–≥–æ –∑ –±–∞–∑–æ–≤–∏–º —Ü–∏–∫–ª–æ–º —á–µ—Ä–µ–∑ <code>withLatestFrom</code>.</li>
        </ul>
      </article>

      <!-- Level 3 -->
      <article class="desc" data-level="3" style="display:none;">
        <h2>üî¥ –†—ñ–≤–µ–Ω—å 3 ‚Äî ¬´–ü–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è¬ª</h2>
        <p><strong>–ú–µ—Ç–∞:</strong> —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ <em>–¥–≤–∞</em> —Å–≤—ñ—Ç–ª–æ—Ñ–æ—Ä–∏ (–Ω–∞–ø—Ä—è–º–∫–∏ ¬´–ü—ñ–≤–Ω—ñ—á‚Äì–ü—ñ–≤–¥–µ–Ω—å¬ª —Ç–∞ ¬´–ó–∞—Ö—ñ–¥‚Äì–°—Ö—ñ–¥¬ª), ensuring:
          <em>–Ω—ñ–∫–æ–ª–∏</em> –Ω–µ —Å–≤—ñ—Ç—è—Ç—å—Å—è –¥–≤–∞ –∑–µ–ª–µ–Ω—ñ –æ–¥–Ω–æ—á–∞—Å–Ω–æ; –º—ñ–∂ –∑–µ–ª–µ–Ω–∏–º–∏ —Ñ–∞–∑–∞–º–∏ ‚Äî <strong>–∂–æ–≤—Ç–∞ –ø–∞—É–∑–∞</strong> —ñ <strong>all-red</strong> (–∫–æ—Ä–æ—Ç–∫–∞ –ø–∞—É–∑–∞ –∑ –¥–≤–æ–º–∞ —á–µ—Ä–≤–æ–Ω–∏–º–∏).</p>
        <p><strong>–Ü–¥–µ—è RxJS:</strong> –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å —Ñ–∞–∑ —è–∫ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π —Å—Ç—Ä—ñ–º (–∫–æ–Ω–≤–µ—î—Ä <code>tap ‚Üí delay ‚Üí repeat</code>) –∞–±–æ –Ω–µ–≤–µ–ª–∏–∫–∏–π state-machine –Ω–∞ <code>scan</code>.</p>
        <ul>
          <li><strong>–û–ø–µ—Ä–∞—Ç–æ—Ä–∏:</strong> <code>of</code>, <code>concat</code>, <code>tap</code>, <code>delay</code>, <code>repeat</code> <em>(–∞–±–æ)</em> <code>scan</code> —è–∫ –∞–≤—Ç–æ–º–∞—Ç.</li>
          <li><strong>–ö—Ä–∏—Ç–µ—Ä—ñ—ó —É—Å–ø—ñ—Ö—É:</strong> –∑–µ–ª–µ–Ω–∏–π –ø–æ —á–µ—Ä–∑—ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–º–∫—É; –º—ñ–∂ –Ω–∏–º–∏ ‚Äî –∂–æ–≤—Ç–∏–π —Ç–∞ –∫–æ—Ä–æ—Ç–∫–∏–π all-red; –∂–æ–¥–Ω–∏—Ö –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤.</li>
          <li><strong>–¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏:</strong> –ø—Ä–æ–ø—É—Å–∫ all-red, –Ω–µ—É–∑–≥–æ–¥–∂–µ–Ω—ñ –∑–∞—Ç—Ä–∏–º–∫–∏, –¥–≤–∞ –∞–∫—Ç–∏–≤–Ω–∏—Ö –ø–æ—Ç–æ–∫–∏ –æ–¥–Ω–æ—á–∞—Å–Ω–æ.</li>
          <li><strong>–ü—ñ–¥–∫–∞–∑–∫–∞:</strong> —Å–∫–ª–∞–¥–∏ —Ñ–∞–∑–æ–≤–∏–π –ª–∞–Ω—Ü—é–∂–æ–∫: <code>A:green ‚Üí A:yellow ‚Üí all-red ‚Üí B:green ‚Üí B:yellow ‚Üí all-red ‚Üí (repeat)</code>.</li>
        </ul>
      </article>
    </section>

    <!-- –ü–∞–Ω–µ–ª—å –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ä—ñ–≤–Ω—è–º–∏ -->
    <div class="controls">
      <button id="level1">–†—ñ–≤–µ–Ω—å 1</button>
      <button id="level2">–†—ñ–≤–µ–Ω—å 2</button>
      <button id="level3">–†—ñ–≤–µ–Ω—å 3</button>

    <label style="margin-left:20px;">
      <input type="checkbox" id="toggle-solutions">
    –ü–æ–∫–∞–∑–∞—Ç–∏ —Ä—ñ—à–µ–Ω–Ω—è
    </label>
    </div>

    <!-- –í–µ—Ä—Å—ñ—è -->
    <footer style="margin-top:120px; opacity:0.7; font-size:14px;">
      –í–µ—Ä—Å—ñ—è: v0.4.2
    </footer>
  </main>

  <script type="module" src="app.js"></script>
</body>
</html>
